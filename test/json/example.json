{
  "version": "0.2.1",
  "name": "Example API",
  "description": "Full features demo",

  "model": {
    "tables": {
      "type": {
        "fields": {
          "_uuid": "uuid",
          "_string": "string",
          "_text": "text",
          "_int": "int",
          "_integer": "integer",
          "_float": "float",
          "_date": "date",
          "_datetime": "datetime",
          "_increments": "increments",
          "_file": "file",
          "_booleam": "boolean",
          "_bool": "bool",
          "_json": "json"
        }
      },
      "link": {
        "fields": {
          "id": ["uuid", "primary"],
          "duplicate": ["uuid", "fk:link:id", "notself"],
          "self": ["uuid", "fk:link:id"],
          "parent": ["uuid", "fk:link:id", "notself", "noloop"],
          "type": ["uuid", "fk:link:id", "notself", "noloop"]
        }
      },
      "void": {
        "fields": {
          "id": ["uuid", "primary"],
          "_uuid": ["uuid", "nullable"],
          "_string": ["string", "nullable"],
          "_text": ["text", "nullable"],
          "_int": ["int", "nullable"],
          "_integer": ["integer", "nullable"],
          "_float": ["float", "nullable"],
          "_date": ["date", "nullable"],
          "_datetime": ["datetime", "nullable"],
          "_increments": ["increments", "nullable"],
          "_file": ["file", "nullable"],
          "_booleam": ["boolean", "nullable"],
          "_bool": ["bool", "nullable"],
          "_json": ["json", "nullable"]
        }
      }
    }
  },
  
  "variables": {
    "element_align": {
      "type": "string",
      "enum": ["left", "right", "center"]
    },
    "element_name": {
      "type": "string",
      "min": 1,
      "max": 16
    }
  },

  "api": {
    "prefix": "/api",
    "crud-tables": {
      "link": {
        "GET": "read",
        "PUT": "update",
        "POST": "create",
        "DELETE": "delete"
      }
    },

    "requests": {
      "request": {
        "GET /type": {
          "Description": "Get the list of types",
          "table": "type",
          "action": "read:list",
          "output": ["*"],
          "filter": {
            "page": {
              "current": "header:page-current",
              "max": "header:page-max"
            },
            "fields": {
              "_date": {
                "gt": "header:field-date-start",
                "lt": "header:field-date-end"
              },
              "_boolean": {
                "eq": "header:field-boolean"
              }
            }
          }
        },
        "GET /article/published": {
          "table": "article",
          "action": "read:list",
          "filter": {
            "field": {
              "status": { "value": "published" }
            }
          },
          "output": ["*"]
        },
        "GET /article/:id": {
          "table": "article",
          "action": "read",
          "filter": {
            "field": {
              "id": ":id"
            }
          },
          "output": {
            "fields": ["*"]
          }
        },
        "POST /article": {
          "table": "article",
          "action": "create",
          "input": ["*"],
          "output": ["*"]
        },
        "PUT /article/:id": {
          "table": "article",
          "action": "update:one",
          "filter": {
            "field": {
              "id": ":id"
            }
          },
          "input": ["*"]
        },
        "DELETE /article/:id": {
          "table": "article",
          "action": "delete",
          "filter": {
            "id": ":id"
          },
          "input": ["*"]
        }
      }
    }
  },

  "test": {
    "server": "http://127.0.0.1:8001/api",
    "actions": [
      {
        "description": "Run test_empty.json",
        "run": "php artisan make:api ./vendor/grabmy/laravel-api-builder/test/test_empty.json",
        "result": {
          "code": 0,
          "output": [
            { "contains": "warning" },
            { "contains": "warning" },
            { "contains": "warning" }
          ]
        }
      },
      {
        "description": "Request GET on /test returns content",
        "request": {
          "GET": "/test",
          "headers": [
            { "Accept": "json" }
          ]
        },
        "result": {
          "code": 200,
          "headers": [
            {"content-length": {"gt": 0}},
            {"content-type": {"eq": "application/json"}}
          ],
          "content": {"json": "application.test.name"}
        },
        "store": {
          "type": "headers:content-type",
          "name": "content:application.test.name",
          "version": "content:application.test.version"
        }
      },
      {
        "request": {
          "GET": "/test/{store:version}",
          "header": [
            { "Accept": "json" }
          ]
        },
        "result": {
          "code": 404,
          "content": "{message: \"Not found\"}"
        }
      }
    ]
  }
}